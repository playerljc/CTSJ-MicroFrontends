{"version":3,"file":"vueApp.js","sources":["plugins/vueApp.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n// eslint-disable-next-line max-classes-per-file\r\nimport Vue from 'vue';\r\n/**\r\n * VueApp - Vue组件\r\n * @class VueApp\r\n * @classdesc VueApp\r\n */\r\nvar VueApp = /** @class */ (function () {\r\n    /**\r\n     * constructor\r\n     * @param component\r\n     * @param el\r\n     * @param props\r\n     * @param config\r\n     * @param refresh\r\n     */\r\n    function VueApp(_a) {\r\n        var component = _a.component, el = _a.el, props = _a.props, config = _a.config, refresh = _a.refresh;\r\n        this.mountEl = null;\r\n        this.mountWrapEl = null;\r\n        // 子组件\r\n        this.Component = component;\r\n        // 挂载的组件\r\n        this.el = el;\r\n        // 路由组件的props\r\n        this.props = props;\r\n        // 路由配置\r\n        this.config = config;\r\n        // 刷新\r\n        this.refresh = refresh;\r\n        this.createMountEl();\r\n    }\r\n    /**\r\n     * createMountEl - 创建挂载的el\r\n     */\r\n    VueApp.prototype.createMountEl = function () {\r\n        this.mountWrapEl = document.createElement('div');\r\n        this.mountWrapEl.className = 'ctsj_microfrontends_vueapp_mount_warapel';\r\n        this.mountWrapEl.style.width = '100%';\r\n        this.mountWrapEl.style.height = '100%';\r\n        this.mountWrapEl.style.padding = '0';\r\n        this.mountWrapEl.style.margin = '0';\r\n        this.mountEl = document.createElement('div');\r\n        this.mountEl.className = 'ctsj_microfrontends_vueapp_mountel';\r\n        this.mountEl.style.width = '100%';\r\n        this.mountEl.style.height = '100%';\r\n        this.mountEl.style.padding = '0';\r\n        this.mountEl.style.margin = '0';\r\n        this.mountWrapEl.appendChild(this.mountEl);\r\n        this.el.appendChild(this.mountWrapEl);\r\n    };\r\n    /**\r\n     * mount - 挂载\r\n     * @param config - vue的配置对象\r\n     * @return Promise\r\n     */\r\n    VueApp.prototype.mount = function (config) {\r\n        var _this = this;\r\n        if (config === void 0) { config = {}; }\r\n        return new Promise(function (resolve) {\r\n            _this.ins = new Vue(__assign(__assign({}, (config || {})), { render: function (createElement) {\r\n                    return createElement(_this.Component, {\r\n                        props: {\r\n                            routerProps: __assign({}, _this.props),\r\n                            config: _this.config,\r\n                            refresh: _this.refresh,\r\n                        },\r\n                    });\r\n                }, mounted: function () {\r\n                    // @ts-ignore\r\n                    if (config.mounted) {\r\n                        // @ts-ignore\r\n                        config.mounted();\r\n                    }\r\n                    resolve();\r\n                } }));\r\n            // @ts-ignore\r\n            _this.ins.$mount(_this.mountEl);\r\n        });\r\n    };\r\n    /**\r\n     * update - 更新\r\n     * @return Promise\r\n     */\r\n    VueApp.prototype.update = function () {\r\n        var _this = this;\r\n        // @ts-ignore\r\n        return new Promise(function (resolve) {\r\n            // @ts-ignore\r\n            _this.ins.$forceUpdate();\r\n            resolve();\r\n        });\r\n    };\r\n    /**\r\n     * unmount - 销毁\r\n     * @return boolean\r\n     */\r\n    VueApp.prototype.unmount = function () {\r\n        var _a, _b;\r\n        // @ts-ignore\r\n        this.ins.$destroy();\r\n        (_b = (_a = this.mountWrapEl) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.removeChild(this.mountWrapEl);\r\n        return true;\r\n    };\r\n    /**\r\n     * getIns\r\n     */\r\n    VueApp.prototype.getIns = function () {\r\n        return this === null || this === void 0 ? void 0 : this.ins;\r\n    };\r\n    return VueApp;\r\n}());\r\nexport default VueApp;\r\n"],"names":["__assign","this","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","Vue","VueApp","_a","component","el","props","config","refresh","mountEl","mountWrapEl","Component","createMountEl","document","createElement","className","style","width","height","padding","margin","appendChild","mount","_this","Promise","resolve","ins","render","routerProps","mounted","$mount","update","$forceUpdate","unmount","_b","$destroy","parentElement","removeChild","getIns"],"mappings":"AAAA,IAAIA,SAAYC,MAAQA,KAAKD,UAAa,WAStC,OARAA,SAAWE,OAAOC,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAII,KADTL,EAAIG,UAAUF,GACOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KACzDN,EAAEM,GAAKL,EAAEK,IAEjB,OAAON,IAEKU,MAAMb,KAAMO,mBAGzBO,cAMP,IAAIC,OAAwB,WASxB,SAASA,EAAOC,GACZ,IAAIC,EAAYD,EAAGC,UAAWC,EAAKF,EAAGE,GAAIC,EAAQH,EAAGG,MAAOC,EAASJ,EAAGI,OAAQC,EAAUL,EAAGK,QAC7FrB,KAAKsB,QAAU,KACftB,KAAKuB,YAAc,KAEnBvB,KAAKwB,UAAYP,EAEjBjB,KAAKkB,GAAKA,EAEVlB,KAAKmB,MAAQA,EAEbnB,KAAKoB,OAASA,EAEdpB,KAAKqB,QAAUA,EACfrB,KAAKyB,gBAgFT,OA3EAV,EAAOL,UAAUe,cAAgB,WAC7BzB,KAAKuB,YAAcG,SAASC,cAAc,OAC1C3B,KAAKuB,YAAYK,UAAY,2CAC7B5B,KAAKuB,YAAYM,MAAMC,MAAQ,OAC/B9B,KAAKuB,YAAYM,MAAME,OAAS,OAChC/B,KAAKuB,YAAYM,MAAMG,QAAU,IACjChC,KAAKuB,YAAYM,MAAMI,OAAS,IAChCjC,KAAKsB,QAAUI,SAASC,cAAc,OACtC3B,KAAKsB,QAAQM,UAAY,qCACzB5B,KAAKsB,QAAQO,MAAMC,MAAQ,OAC3B9B,KAAKsB,QAAQO,MAAME,OAAS,OAC5B/B,KAAKsB,QAAQO,MAAMG,QAAU,IAC7BhC,KAAKsB,QAAQO,MAAMI,OAAS,IAC5BjC,KAAKuB,YAAYW,YAAYlC,KAAKsB,SAClCtB,KAAKkB,GAAGgB,YAAYlC,KAAKuB,cAO7BR,EAAOL,UAAUyB,MAAQ,SAAUf,GAC/B,IAAIgB,EAAQpC,KAEZ,YADe,IAAXoB,IAAqBA,EAAS,IAC3B,IAAIiB,QAAQ,SAAUC,GACzBF,EAAMG,IAAM,IAAIzB,IAAIf,SAASA,SAAS,GAAKqB,GAAU,IAAM,CAAEoB,OAAQ,SAAUb,GACvE,OAAOA,EAAcS,EAAMZ,UAAW,CAClCL,MAAO,CACHsB,YAAa1C,SAAS,GAAIqC,EAAMjB,OAChCC,OAAQgB,EAAMhB,OACdC,QAASe,EAAMf,YAGxBqB,QAAS,WAEJtB,EAAOsB,SAEPtB,EAAOsB,UAEXJ,QAGRF,EAAMG,IAAII,OAAOP,EAAMd,YAO/BP,EAAOL,UAAUkC,OAAS,WACtB,IAAIR,EAAQpC,KAEZ,OAAO,IAAIqC,QAAQ,SAAUC,GAEzBF,EAAMG,IAAIM,eACVP,OAORvB,EAAOL,UAAUoC,QAAU,WACvB,IAAQC,EAIR,OAFA/C,KAAKuC,IAAIS,WACgF,QAAxFD,EAAiC,QAA3B/B,EAAKhB,KAAKuB,mBAAgC,IAAPP,OAAgB,EAASA,EAAGiC,qBAAkC,IAAPF,GAAyBA,EAAGG,YAAYlD,KAAKuB,cACvI,GAKXR,EAAOL,UAAUyC,OAAS,WACtB,OAAOnD,MAAAA,UAAmC,EAASA,KAAKuC,KAErDxB,EAvGgB,kBAyGZA"}